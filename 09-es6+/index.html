<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Intro to Regex</title>
    <meta name="description" content="2017 was the year of CSS grid, a powerful tool that was developed specially to do layout on the web. It allows us to do many things that we couldn't before, without extreme measures of hackish-ness. It is definitely not hyperbole to say that CSS grid will revolutionise web design moving forward. This talk will introduce CSS grid and how it can be used to create modern layouts for the web.">

    <link rel="stylesheet" href="../04-css-2/css/reveal.css">
    <link rel="stylesheet" href="../04-css-2/css/theme/jing.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">

    <link rel="stylesheet" href="../04-css-2/lib/css/zenburn.css">
    <link rel="stylesheet" href="../laser.css">
		<script src="../laser.js"></script>

    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? '../04-css-2/css/print/pdf.css' : '../04-css-2/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <style>
      .flex-col {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      .flex {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
      }
      .flex > img {
        width: 50%;
      }
      .grid {
        display: grid; 
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
      pre {
        padding: 8px !important;
        border-radius: 8px !important;
        background: #3f3f3f;
        position: relative;
      }
      .reveal .slides pre code.large-code {
        font-size: 2.5rem !important;
        line-height: 3rem !important;
        padding: 8px !important;
        border-radius: 8px !important;
      }
      .reveal .slides pre code.med-code {
        font-size: 1.9rem !important;
        line-height: 2.25rem !important;
        padding: 8px !important;
        border-radius: 8px !important;
      }
      .reveal .slides .nosidescroll {
        overflow-x: hidden;
      }
      .livecode {
        max-height: 30vh !important;
      }
      .livecode.serious {
        max-height: 20vh !important;
      }
      .slack-code {
        padding: 1px 6px !important;
        background: #ddd;
        color: rgb(180, 47, 69);
        border-radius: 4px;
      }
      fieldset {
        border: 3px solid #444 !important;
        width: fit-content;
        padding: 1rem !important;
      }
      :not(pre) >  code {
        padding: 4px !important;
        background: lightgrey;
        color: rgb(211, 12, 52);
        border-radius: 8px;
      }
      pre.wrong::before {
        content: 'üö´';
        position: absolute;
        left: -4rem;
        font-size: 4rem;
        top: 2rem;

      }
      pre.correct::before {
        content: '‚úÖ';
        position: absolute;
        left: -4rem;
        font-size: 4rem;
        top: 2rem;

      }
      #ifelse-vid {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        width: 100vw;
        bottom: 0;
        z-index: -9;
      }
    </style>
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <section>
            <h1>Advanced Javascript</h1>
            <h3>ES6 & Beyond</h3>
          </section>
          ### ES6+ Features
          ##### Concise Index of them: es6-features.org/
          ---
          
          ### ES6 We've already Seen
          <ul>
          <li class='fragment'> let, const</li>
          <li class='fragment'> String Template Literals  </li>
          <li class='fragment'> Arrow Functions  </li>
          <li class='fragment'> new Symbol, Big Int </li>
          <li class='fragment'> Array Methods: </li>
          <li class='fragment'> map, filter, reduce, some, find, every, includes, etc. </li>
          </ul>
          
          ---
          
          ### New ES6:
          <ul>
          <li class='fragment'> Default Parameters </li>
          <li class='fragment'> Destructuring & Param Context matching </li>
          <li class='fragment'> Object Propery/Method Shorthand </li>
          <li class='fragment'> Computed Properties </li>
          <li class='fragment'> Rest & Spread operators </li>
          <li class='fragment'> Import/Export </li>
          <li class='fragment'> non-ES6 Extra: Currying/Closures </li>
          </ul>
          
          ---
          
          ### Default Parameters
          ##### If no value or undefined is passed, then initialize with a default value
          
          ```js
          function chatMsg(greeter, msg) {
              console.log(`${greeter}: ${msg}`)
          }
          function chatMsg2(greeter = 'Auto-greeter', msg = 'Hello') {
              console.log(`${greeter}: ${msg}`)
          }
          chatMsg('Joe', 'What's up?') // 'Joe: What's up?'
          chatMsg() // 'undefined: undefined'
          chatMsg2() // 'Auto-greeter: Hello'
          ```
          
          ---
          
          ### Hypothetical Use Case:
          ##### Use previous params or even functions in your default param expression
          ```js
          const randNum = () => Math.random().toString().slice(3, 5)
          function createUser(name, username = name+randNum(), pass, isAdmin = false) {
              sendLoginData(user, pass);
              setPermissions(isAdmin);
          }
          createUser('Joe', undefined, 'h2jq9fn48', true);
          ```
          
          ---
          
          ### Destructuring: 
          #### Unpack values from arrays, or properties from objects, into distinct variables.
          {üçû, ü•¨, üçÖ, üßÖ, üßÄ, ü•ì, ü•©, üçû} = üçî
          ###### 
          { ‚ú®, üê¥ } = ü¶Ñ
          ---
          
          <ul>
            <li class='fragment'> Array Destructuring </li>
          <li class='fragment'> Object Destructuring </li>
          <li class='fragment'> Parameter Context matching </li> 
          </ul>
          
          ---
          
          
          ### Array Destructuring
          
          ```js
          var list = [ 1, 2, 3 ]
          var [ a, , b ] = list
          [ b, a ] = [ a, b ]
          // Now we avoid needing a temp variable 
          [d, e, f, g=7] = list // can also use defaults here
          ```
          
          ---
          
          ### Object Destructuring
          
          ```js
          const obj = {p: 42, q: true};
          const {p, q} = obj; // moves the properties into global namespace
          console.log(p, q); // 42, true
          const {p: a, q: b} = obj // Creates new global var names
          console.log(a, b); // 42, true
          ```
          
          ---
          
          ### Common Use Case
          ##### Destructuring Config Objects as Function argument
          ```js
          const user = {user: 'jdoe', fullName: {first: 'John',last: 'Doe'}};
          function whois({user, fullName: {first: name}}) {
            return `${user} is ${name}`;
          }
          console.log(whois(user));  // "jdoe is John"
          ```
          ---
          
          ### Fail Safe Destructuring
          
          ```js
          var list = [ 7, 42 ]
          var [ a = 1, b = 2, c = 3, d ] = list
          console.log(a, b, c, d) // 7, 42, 3, undefined
          ```
          
          ---
          
          ### Parameter Context Matching: 
          ```js
          function f ([ name, val ]) {
              console.log(name, val)
          }
          function g ({ name: n, val: v }) {
              console.log(n, v)
          }
          ```
          
          ---
          
          ##### Using Destructuring With Default params
          ```js
          function f([x, y] = [1, 2], {z: z} = {z: 3}) { 
            return x + y + z
          }
          f()  // 6
          ```
          
          ---
          
          ### Rest & Spread operators
          # ...
          ### Rest: to gather up remaining values into an Array or Object
          ### Spread: to expand out encapsulated values into loos values.
          
          ---
          ### Rest
          ##### Most often used for Function Parameters
          ```js
          function addFirstTwo(a, b, ...manyMoreArgs) {
            return [a + b, ...manyMoreArgs]
          }
          addFirstTwo([1,1,5,6,7]) // [2, 5, 6, 7]
          ```
          
          ---
          ### Object Spread
          ```js
          const names1 = {cat: 'Bob'};
          const names2 = {dog: 'Fred', alligator: 'Benedict'};
          const copy = { ...names2 } // Avoid pass by Reference trouble
          const newNames = { ...names1, ...names2 };
          ```
          ---
          ### Array Spread
          ##### Its a bit like .slice()
          ```js
          var arr = [1, 2, 3];
          var arr2 = [...arr];
          ```
          
          ---
          
          ### Object Property Shorthand
          
          ```js
          let cat = 'Meow';
          let dog = 'Woof';
          let speak = (animal) => console.log(animal)
          
          let someObject = {
            cat,
            dog,
            speak
          }
          someObject.speak(cat) // 'Meow'
          ```
          
          ---
          
          ### Computed Properties
          ```js
          let key = 'key';
          let value = 'val';
          let obj = {};
          obj[key] = value;
          
          let computedObj = {
              [key]: value
          }
          ```
          
          ---
          
          Map and WeakMap
          * Use Maps for garaunteeing order in an object.
          
          ```js
          const myMap = new Map({...})
          ```
          
          ---
          
          
          ### Import & Export
          
          ##### Export is used when creating JavaScript modules to export functions, objects, or primitive values from the module so they can be used by other programs with the import statement.
          
          ##### Import is used to import bindings (i.e. functions, vars, etc) which are exported by another module.
          
          ##### This will come in handy with React/Frameworks
          
          ---
          
          ### Export Syntax
          
          ```js
          export let name1, name2, ‚Ä¶,;
          export const name1 = ‚Ä¶, name2 = ‚Ä¶, ‚Ä¶;
          export function functionName(){...}
          export class ClassName {...}
          // Defaults
          export default expression;
          export default function (‚Ä¶) { ‚Ä¶ }
          ```
          
          ---
          ### Import Syntax
          
          ```js
          import defaultExport from "module-name";
          import * as name from "module-name";
          import { export1 } from "module-name";
          import { export1 as alias1 } from "module-name";
          import { export1 , export2 } from "module-name";
          ```
          
          ---
          
          ### Currying And Closures
          
          ---
          ### Closures Illustration
          ```js
          for (var i = 1; i <= 5; i++) {
              setTimeout(function() { console.log(i); }, 1000*i);     // 6 6 6 6 6
          }
          ```
          ```js
          for (var i = 1; i <= 5; i++) {
              setTimeout(function(x) { return ()=>console.log(x) }(i), 1000*i);
              // 1 2 3 4 5
          }
          ```
          
          ---
          
          ### Simple Curried Function
          
          ```js
          var fn = x => y => x + y;
          var n = fn(3)
          console.log(n(4))
          ```
         
        </section>

        <section>
          <section>
            <h2>Promises</h2>
          </section>

### FCC HW: ES6 & Intermediate Algorithm Scripting

---

### [YouMightNotNeedJS.com](https://YouMightNotNeedJS.com)

---

### Curry Code Along

---

### Promises
* The Promise object represents the eventual completion (or failure) of an asynchronous operation, and its resulting value.
* Promises allow us to write callbacks in a linear or serial manner and avoid "Callback Hell"
* It returns a temporary proxy value for something not known when the promise is created.
* It allows you to associate handlers with an asynchronous action's eventual success value or failure reason.
---
### There are four states in which the promises can be:

* ‚è≥ Pending: initial state. Async operation is still in process.
* ‚úÖ Fulfilled: the operation was successful. It invokes .then callback. E.g., .then(onSuccess).
* ‚õîÔ∏è Rejected: the operation failed. It invokes the .catch or .then ‚Äòs second argument (if any). E.g., .catch(onError) or .then(..., onError)
* üòµ Settled: it‚Äôs the promise final state. The promise is dead. Nothing else can be resolved or rejected anymore. The .finally method is invoked.
---
![Promise Diagram](https://adrianmejia.com/images/promises-states.png)

---
### Promises Are a future Value
```js
function id(x) {
return Promise.resolve(x);
}
function wait(time){ return setTimeout(() => console.log('done after ' + time/1000 + ' seconds'), time)}
```

---
### Callback Hell is a terrible place
![Callback Hell](https://miro.medium.com/max/2100/1*1m0Mxwn0N50JXxzx8ElaaQ.jpeg)

---
### What's a Callback Again?
* Any function that is executed at some indeterminate time after initial page render (Window Mounting).
* **Usually** callbacks are passed as a parameter in another function that is invoked by some Use generated Event
```js
setTimeout(() => console.log('finally'), Math.random()*10) // Not always user generated, though, just displaced in time from initial Mount

document.addEventListener('click', (e) => console.log(e))
);
```
---
### Callback Hell to Promises
```js
a(() => {
  b(() => {
    c(() => {
      d(() => {
        // and so on ...
      });
    });
  });
});
```
```js
Promise.resolve()
  .then(a)
  .then(b)
  .then(c)
  .then(d)
  .catch(console.error);
```
---
### Synchronous vs Asynchronous
```js
console.log('First');
console.log('Second');
console.log('Third');
```
```js
console.log('First');
jQuery.get('index.html', () => console.log("Second"));
console.log('Third');
```
---
### Why Structure it this way?
* Event-based Nature of user input
* Procedural vs. Declarative
```js
tweets = loadDataSync(data);
// ... Wait
// ... Do something with the data
data.filter(() => ...) // setTimeout(data.filter(...))
doSomeOtherThings();
```
```js
loadDataAsync(function (data) {
    // ... All ready to use the data whenever it arrives
    data.filter(() => ...)
});
doSomeOtherThings();
```

---

![Event Loop](https://gfycat.com/tastyuntidyinexpectatumpleco-science-technology-web-development)

---

[Async/Sync](https://medium.com/better-programming/is-javascript-synchronous-or-asynchronous-what-the-hell-is-a-promise-7aa9dd8f3bfb)

---
## Event Loop Video
[What is the Event Loop?](https://youtu.be/8aGhZQkoFbQ?t=60)

---

### Promises Animation Code Along
##### Animating a multi-step spinner
---

### Our First Peak at Fetch
* `fetch` is a Promise that accepts a URL, then makes an HTTP request to that resource and asynchronously returns with a data payload
```js
let f = fetch('https://jsonplaceholder.typicode.com/todos')
// We call .then on it:
f.then(response => response.json())
// the .json() method is built into the fetch API, for formatting response data into JSON format
.then(data => console.log(data))
```
---
### Primer on JSON
* Javascript Object Notation (Counterpart to XML format)
* Universal data payload format for the Web
```json
{"menu": {
  "id": "file",
  "value": "File",
  "popup": {
    "menuitem": [
      {"value": "New", "onclick": "CreateNewDoc()"},
      {"value": "Open", "onclick": "OpenDoc()"},
      {"value": "Close", "onclick": "CloseDoc()"}
    ]
  }
}}
```
---
### Let's have a look in the console at what this does
```js
let f = fetch('https://jsonplaceholder.typicode.com/todos')
// We call .then on it:
f.then(response => response.json())
// the .json() method is built into the fetch API, for formatting response data into JSON format
.then(data => console.log(data))
```

---
### Legacy XHR Syntax
https://gomakethings.com/why-i-still-use-xhr-instead-of-the-fetch-api/

---

## For Internet Explorer
### Fetch polyfill
https://unpkg.com/unfetch@4.1.0/polyfill/index.js
### Promises Polyfill
https://github.com/getify/native-promise-only

---
### Eventually:
#### Async/Await Syntax:
##### Another way to write Promises

---
### Writing A Curried Fetch Utility
```js
var f = protocol => domain => path => fetch(protocol+domain+path).then(r =>r.json()).then(d=> console.log(d))
var prot = f('https://')
var dom = p('jsonplaceholder.typicode.com/')
var todos = dom('todos')
var firstTodo = dom('todos/1')
var users = dom('users')
var
```
---

### Brief Intro to Classes in JS
* Constructor
* Getters
* Setters
---
### Typical Class Declaration
```js
class Vegetable {
    constructor(name){
        this.name = name
    }
}
const carrot = new Vegetable('carrot');
console.log(carrot.name); // 'carrot'
```
---
```js
//Equivalent Function
function vegetable(name) {
    return {
        name: name
    }
}
const carrot = vegetable('carrot')
console.log(carrot.name) // 'carrot'
```
---

### Get and Set
```js
class TempConverter {
  constructor(F) {
    this.F = F;
  }
  get temperature() {
    return (5 / 9) * (this.F - 32);
  }
  set temperature(C) {
    this.F = (C * 9.0) / 5 + 32;
  }
}
// can't use arrow function syntax for getters/setters
```
        </section>

        <section>
          <section>
            <h1>SASS</h1>
            <p>Syntactically Awesome Style Sheets</p>
          </section>
          ### FCC HW: SASS Section

---

### Promise.all()

[Solution/Explanation](https://stackoverflow.com/questions/37693982/how-to-fetch-xml-with-fetch-api)

---

### .text() and xml
* Instead of response.json(), use response.text()
* XML for Compatibility with Windows and Windows Servers
* [xml2js](https://github.com/Leonidas-from-XIV/node-xml2js)
* [xmldoc](https://github.com/nfarina/xmldoc)

---

# Public APIs
### [Github Resource](https://github.com/public-apis/public-apis)
* Add more cross functionality to your app 
* Or start a whole new one!
* Set you github settings in your usr-mgr repo to expose it on your portfolio

---

### Sass
* Syntactically Awesome Style sheets
* Originally developed by Ruby developers
* Deprecated packages: `ruby-sass`, `compass`
* Now there's a C++ compiler/transpiler called `libsass`
* `node-sass` is a node.js binding for `libsass`

---

### Node-sass and libsass docs
* [Node-sass](https://github.com/sass/node-sass)
* [Libsass](https://github.com/sass/libsass)

---

### CSS Preprocessors (Compilers)
* There are various flavors
* They all transpile a special syntax down to CSS
* [Intro to Preprocessors](https://htmlmag.com/article/an-introduction-to-css-preprocessors-sass-less-stylus)
* [Preprocessor Comparison](https://csspre.com/compare/)
* [Cheatsheet](https://devhints.io/sass)

---

### [Sassmeister Tool](https://www.sassmeister.com/)
* Convenient Online Preprocessor

---
 
### .sass vs .scss
* SCSS Stands for "Sassy CSS"
* Altered the Sass syntax enough to make SCSS a superset of CSS
* With SCSS, valid CSS is also valid SCSS
* [Sass vs SCSS](http://www.thesassway.com/editorial/sass-vs-scss-which-syntax-is-better)

---

### SCSS variables
variable map and map.get(key)
```scss
$primary-color: #333;
$colors: ("primary": $primary-color, "secondary": #454545)
body {
    color: $primary-color;
    width: 300px / 960px * 100%;
    background: map-get($colors, "secondary")
}
```

---

### Nesting
- nest css selectors
- with/without `&` operator
- nest css hyphenated rules:
```scss
header {
    .title {
        &.bold{
            font-weight: bold
        }
    }
}
/* and nesting hyphenated rules */
font: {
    size: 1px;
    weight: bold;
    family: 'Signika', sans-serif
}
```

---

### Mixins

* @mixin and @include (like variables for larger chunks of css)
* mixins can take args:
```scss
@mixin flagProps($val){
    opacity: ($val)
    letter-spacing: 2*$val
}
@include flagProps(1)
@include flagProps(0)
```

---

### More Mixin Use cases
* You can spread args too: 
```scss
@mixin flagProps($vals...){
border: $vals;
}
@include flagProps(1px, solid, crimson){
border: $props;
```

---

### Extends 
* Great for a success and error msg use case
```scss
.msg {
    font-size: 2rem;
    line-height: 2rem;
}
.error {
    @extend .msg
    color: crimson
}
```

---

### Other Utilities
```scss
@if @else
@for
@each
@while
@function fn(){@return thing}
```
---

### If Else
```scss
@if $background == 'black' {
    color: white;
}
@else {
    color: black;
}
```

---

### For Loop
```scss
@for $i from 1 through 8 {
    [data-id-#{$i}] {
        margin-left: 2px * $i;
    }
}
```

---

### Example function

```scss
@use "sass:list"
@function remove-where($list, $condition) {
    $new-list: ();
    $separator: list.separator($list)
    @each $element in $list {
        @if not meta.call($condition, $element) {
            $new-list: list.append($new-list, $element, $separator: $separator);
        }
    }
    @return $new-list
}

```

---

### Color Operations
built in sass utilities:
* darken()
* saturate()
* adjust-hue()
* [And more...](https://thoughtbot.com/blog/controlling-color-with-sass-color-functions)
```scss
lighten($color, 20%)
```

---


### SCSS Partials & Modules
* Partials let us break up the css code into modules and import them as needed
* Common use case is to put your vars and functions in partials
```scss 
@import _filename.scss
```

---

### Using node-sass

```bash
npm install node-sass -g //install node sass globally
node-sass //it runs!!
node-sass scss/style.scss -o css //output dir: /css input file: /css/style.scss
node-sass scss -o css //output dir: /css input: /scss (all .scss files there)
node-sass scss -o css --output-style expanded ( or compressed)
node-sass scss -o css -w //watch flag so we can continue to work
```
(open new terminal cmd+T to leave the watcher in the bg)

---

### The package.json file
* setting up npm scripts in the package.json file
* Run `npm init` and answer the form questions
* Then modify your "scripts" rule to be:
```json
"scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "sass": "node-sass scss -o css --output-style compressed && node-sass",
    "watch:sass": "node-sass scss -o css --output-style compressed -w"

  }
  ```

---

### Trade-offs between using SCSS and native CSS
#### Pros
* Syntax Convenience
* Code Organization
#### Cons
* Slight learning curve for new developers
* Extra Build Step
* SCSS logic is not available at runtime, unlike CSS var()/calc()

---

### CSS Spec Continues to Grow
* May need to rely on conveniences of SCSS less and less
* [CSS Nesting Proposal](https://drafts.csswg.org/css-nesting/#nest-selector)

---

CSS filters: 
[filter](https://developer.mozilla.org/en-US/docs/Web/CSS/filter)
[filter support](https://caniuse.com/#feat=css-filters)

---

### VSCode extension
* live sass compiler extension

        </section>

        <section>
          <section>
            <h1>Testing in Javascript</h1>
          </section>
          ### Test Driven Development with Jest
###### (J)avascript T(est)ing = Jest
[Jest Docs](https://jestjs.io/docs/en/getting-started)
---
https://css-tricks.com/front-end-testing-is-for-everyone/
___
### Installation
```bash
npm init
npm install --save-dev Jest
```

---

### First Test
`index.js`
```js
function sum = (a, b) => a + b
module.exports = sum
```

---

`index.test.js`
```js
test('two plus two is four', () => {
  expect(2 + 2).toBe(4);
});
```

---

---

#### Mocking Functions
        </section>

      </div>
    </div>


    <script src="../04-css-2/lib/js/head.min.js"></script>
    <script src="../04-css-2/lib/js/caniuse-embed.min.js"></script>
    <script src="../04-css-2/js/reveal.js"></script>

    <script>
      Reveal.initialize({
        dependencies: [
          { src: '../04-css-2/plugin/markdown/marked.js' },
          { src: '../04-css-2/plugin/markdown/markdown.js' },
          { src: '../04-css-2/plugin/notes/notes.js', async: true },
          { src: '../04-css-2/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });
    </script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>

    <script defer>
      let span = document.querySelectorAll('.snippet-btn')
      let snippet = ``
new ClipboardJS(span);
var playing = false
function togglePlay(el) {
  playing ? el.play() : el.pause()
  playing = !playing
}
    </script>
  </body>
</html>
